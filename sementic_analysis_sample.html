<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Sementic analysis JS online - Teddy Lazebnik</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="General Sementic Analysis build on pure js (javascript) using words counts and generating symantic space using taggers" name="description">
    <meta content="Sementic Analysis, nlp, teddy, lazebnik" name="keywords">
    <meta content="Teddy Lazebnik" name="author">
	<link rel='icon' href='img/favicon.ico' type='image/x-icon'/ >
	<!-- css -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	<link href="css/teddy_style.css" rel="stylesheet">
    
	<!-- stemmer logics -->
	<script src="js/stemmers.js"></script>
	<script src="js/PorterStemmer.js"></script>
	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-154895667-1"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-154895667-1');
	</script>
	<!-- Hotjar Tracking Code for http://teddylazebnik.info/ -->
	<script>
		(function(h,o,t,j,a,r){
			h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
			h._hjSettings={hjid:1812929,hjsv:6};
			a=o.getElementsByTagName('head')[0];
			r=o.createElement('script');r.async=1;
			r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
			a.appendChild(r);
		})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
	</script>
</head>

<body onload="init()">
	<div id="progressBar"></div>
	<div id="ScrollPath"></div>
	<div class="row">
			<div class="col-lg-12 col-md-12 col-sm-12 mobile-space">
				<nav class="navbar navbar-expand-lg">
				  <a class="navbar-brand" href="index.html" id="logo">Theodore (Teddy) Lazebnik</a>
				  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
					<img class="navbar-toggler-icon" src="https://img.icons8.com/ios-filled/50/000000/menu.png"/>
				  </button>
				  <div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav mr-auto">
					  <li class="nav-item form-inline mobile" style="padding-bottom: 10px;">					  
						  <input type="text" class="form-control input-search" id="search-data" type="search" placeholder="Search" aria-label="Search">
						  <div class="input-group-append">
							<button class="btn btn-outline-white btn-search" onclick="return searchPage();"><img src="https://img.icons8.com/android/24/000000/search.png"/></button>
						  </div>
					  </li>
					  <li class="nav-item">
						<a class="nav-link" href="index.html">Short Bio</a>
					  </li>
					  <li class="nav-item">
						<a class="nav-link" href="publications.html">Publications</a>
					  </li>
					  <li class="nav-item">
						<a class="nav-link" href="opensource.html">Open Resources</a>
					  </li>
					  <li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						  Teaching
						</a>
						<div class="dropdown-menu" aria-labelledby="navbarDropdown">
						  <a class="dropdown-item" href="courses/deep_leanring.html">Deep Learning</a>
						  <a class="dropdown-item" href="courses/numerical.html">Numerical Analysis</a>
						  <a class="dropdown-item" href="courses/linear_mathematical_optimization.html">Linear Optimization</a>
						  <a class="dropdown-item" href="courses/tools_numerical_analysis.html">Tools For Numerical Analysis</a>
						  <div class="dropdown-divider"></div>
						  <a class="dropdown-item" href="teaching.html">All classes</a>
						</div>
					  </li>
					  <li class="nav-item">
						<a class="nav-link" href="students.html">Students</a>
					  </li>
					</ul>
					<div class="form-inline my-2 my-lg-0 desktop">
					  <input type="text" class="form-control input-search" id="search-data-2" type="search" placeholder="Search" aria-label="Search">
					  <div class="input-group-append">
						<button class="btn btn-outline-white btn-search" onclick="return searchPage();"><img src="https://img.icons8.com/android/24/000000/search.png"/></button>
					  </div>
					</div>
				  </div>
				</nav>
				<div class="body">
					<div class="fluid-container">
						<div class="row">
						<div class="col-lg-12 col-md-12 col-sm-12">
							<div class="info">
										<div class="alert alert-danger alert-dismissible fade show" role="alert" style="display: none" id="error-search">
										  <strong>Page Not found</strong>, I am still working on our inner website search engine. Try again or use the navigation bar.
										  <button type="button" class="close" onclick="return closeSearchAlert()" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										  </button>
										</div>
								<h1> General Sementic Analysis </h1>
									<div id="train_panel">
										<p><b>Train Panel</b></p>
										<form style="text-align: left;">
											<div class="form-group">
												<label for="Sentences">Sentences</label>
												<input class="form-control" type="file" id="Sentences" placeholder="Sentences">
												<a target="_blank" class="btn btn-info" href="data/data.txt">Show Default Set</a>
											</div>
											<div class="form-group">
												<label for="Tags">Tags</label>
												<input class="form-control" type="file" id="Tags" placeholder="Tags">
												<a target="_blank" class="btn btn-info" href="data/tags.txt">Show Default Set</a>
											</div>
											<div class="form-group">
												<label for="StopWords">Stop Words</label>
												<input class="form-control" type="file" id="StopWords" placeholder="Stop Words">
												<a target="_blank" class="btn btn-info" href="data/sw_english.txt">Show Default Set</a>
											</div>
										</form>
										<button id="trainBtn" class="btn btn-primary btn-lg" onclick="train();" style="margin-top: 10px; margin-bottom: 10px;">Train</button>
										<p>Train may take up to few minutes...<br><br></p>									
										
										<form style="text-align: left;">
											<div class="form-group">
												<label for="ModelFile">Load Model File</label>
												<input class="form-control" type="file" id="ModelFile" placeholder="Model File">
												<a target="_blank" class="btn btn-info" href="data/model_2_tags.txt">Show Default Model</a>
											</div>
										</form>						
										
										<form style="text-align: left;">
											<div class="form-group">
												<label for="WhatsAppFile">WhatsApp Chat File</label>
												<input class="form-control" type="file" id="WhatsAppFile" placeholder="Chats App Chat File">
											</div>
										</form>
										
									</div>
									
									<div id="inferance_panel" style="display: none">
										<p><b>Inferance Panel</b></p>
										<form style="text-align: left;">
											<div class="form-group">
												<label for="Sentence">Sentence</label>
												<input class="form-control" type="text" id="Sentence" placeholder="Check Sentence">
											</div>
											<div class="form-group">
												<label for="BestTag">Best Tag</label>
												<input class="form-control" type="text" id="BestTag" placeholder="" readonly>
											</div>
										</form>
										<button class="btn btn-primary btn-lg" onclick="run();" style="margin-top: 10px; margin-bottom: 10px;">Check</button>
										<div id="plot_container">
											
										</div>
										<form style="text-align: left;">
											<div class="form-group">
												<label for="CheckWord">Check Word</label>
												<input class="form-control" type="text" id="CheckWord" placeholder="Check Sentence">
											</div>
											<div class="form-group">
												<label for="BestTagWord">Best Tag</label>
												<input class="form-control" type="text" id="BestTagWord" placeholder="" readonly>
											</div>
										</form>
										<button class="btn btn-primary btn-lg" onclick="runWord();" style="margin-top: 10px; margin-bottom: 10px;">Check Word</button>
										<div id="plot_container_word">
											
										</div>
									</div>
							</div>
						</div>
						</div>
					</div>
				</div>
			</div>
			<p style="display: none;" id="sw_english">able
	about
	above
	abroad
	according
	accordingly
	across
	actually
	adj
	after
	afterwards
	again
	against
	ago
	ahead
	ain't
	all
	allow
	allows
	almost
	alone
	along
	alongside
	already
	also
	although
	always
	am
	amid
	amidst
	among
	amongst
	an
	and
	another
	any
	anybody
	anyhow
	anyone
	anything
	anyway
	anyways
	anywhere
	apart
	appear
	appreciate
	appropriate
	are
	aren't
	around
	as
	a's
	aside
	ask
	asking
	associated
	at
	available
	away
	awfully
	back
	backward
	backwards
	be
	became
	because
	become
	becomes
	becoming
	been
	before
	beforehand
	begin
	behind
	being
	believe
	below
	beside
	besides
	best
	better
	between
	beyond
	both
	brief
	but
	by
	came
	can
	cannot
	cant
	can't
	caption
	cause
	causes
	certain
	certainly
	changes
	clearly
	c'mon
	co
	co.
	com
	come
	comes
	concerning
	consequently
	consider
	considering
	contain
	containing
	contains
	corresponding
	could
	couldn't
	course
	c's
	currently
	dare
	daren't
	definitely
	described
	despite
	did
	didn't
	different
	directly
	do
	does
	doesn't
	doing
	done
	don't
	down
	downwards
	during
	each
	edu
	eg
	eight
	eighty
	either
	else
	elsewhere
	end
	ending
	enough
	entirely
	especially
	et
	etc
	even
	ever
	evermore
	every
	everybody
	everyone
	everything
	everywhere
	ex
	exactly
	example
	except
	fairly
	far
	farther
	few
	fewer
	fifth
	first
	five
	followed
	following
	follows
	for
	forever
	former
	formerly
	forth
	forward
	found
	four
	from
	further
	furthermore
	get
	gets
	getting
	given
	gives
	go
	goes
	going
	gone
	got
	gotten
	greetings
	had
	hadn't
	half
	happens
	hardly
	has
	hasn't
	have
	haven't
	having
	he
	he'd
	he'll
	hello
	help
	hence
	her
	here
	hereafter
	hereby
	herein
	here's
	hereupon
	hers
	herself
	he's
	hi
	him
	himself
	his
	hither
	hopefully
	how
	howbeit
	however
	hundred
	i'd
	ie
	if
	ignored
	i'll
	i'm
	immediate
	in
	inasmuch
	inc
	inc.
	indeed
	indicate
	indicated
	indicates
	inner
	inside
	insofar
	instead
	into
	inward
	is
	isn't
	it
	it'd
	it'll
	its
	it's
	itself
	i've
	just
	k
	keep
	keeps
	kept
	know
	known
	knows
	last
	lately
	later
	latter
	latterly
	least
	less
	lest
	let
	let's
	like
	liked
	likely
	likewise
	little
	look
	looking
	looks
	low
	lower
	ltd
	made
	mainly
	make
	makes
	many
	may
	maybe
	mayn't
	me
	mean
	meantime
	meanwhile
	merely
	might
	mightn't
	mine
	minus
	miss
	more
	moreover
	most
	mostly
	mr
	mrs
	much
	must
	mustn't
	my
	myself
	name
	namely
	nd
	near
	nearly
	necessary
	need
	needn't
	needs
	neither
	never
	neverf
	neverless
	nevertheless
	new
	next
	nine
	ninety
	no
	nobody
	non
	none
	nonetheless
	noone
	no-one
	nor
	normally
	not
	nothing
	notwithstanding
	novel
	now
	nowhere
	obviously
	of
	off
	often
	oh
	ok
	okay
	old
	on
	once
	one
	ones
	one's
	only
	onto
	opposite
	or
	other
	others
	otherwise
	ought
	oughtn't
	our
	ours
	ourselves
	out
	outside
	over
	overall
	own
	particular
	particularly
	past
	per
	perhaps
	placed
	please
	plus
	possible
	presumably
	probably
	provided
	provides
	que
	quite
	qv
	rather
	rd
	re
	really
	reasonably
	recent
	recently
	regarding
	regardless
	regards
	relatively
	respectively
	right
	round
	said
	same
	saw
	say
	saying
	says
	second
	secondly
	see
	seeing
	seem
	seemed
	seeming
	seems
	seen
	self
	selves
	sensible
	sent
	serious
	seriously
	seven
	several
	shall
	shan't
	she
	she'd
	she'll
	she's
	should
	shouldn't
	since
	six
	so
	some
	somebody
	someday
	somehow
	someone
	something
	sometime
	sometimes
	somewhat
	somewhere
	soon
	sorry
	specified
	specify
	specifying
	still
	sub
	such
	sup
	sure
	take
	taken
	taking
	tell
	tends
	th
	than
	thank
	thanks
	thanx
	that
	that'll
	thats
	that's
	that've
	the
	their
	theirs
	them
	themselves
	then
	thence
	there
	thereafter
	thereby
	there'd
	therefore
	therein
	there'll
	there're
	theres
	there's
	thereupon
	there've
	these
	they
	they'd
	they'll
	they're
	they've
	thing
	things
	think
	third
	thirty
	this
	thorough
	thoroughly
	those
	though
	three
	through
	throughout
	thru
	thus
	till
	to
	together
	too
	took
	toward
	towards
	tried
	tries
	truly
	try
	trying
	t's
	twice
	two
	un
	under
	underneath
	undoing
	unfortunately
	unless
	unlike
	unlikely
	until
	unto
	up
	upon
	upwards
	us
	use
	used
	useful
	uses
	using
	usually
	v
	value
	various
	versus
	very
	via
	viz
	vs
	want
	wants
	was
	wasn't
	way
	we
	we'd
	welcome
	well
	we'll
	went
	were
	we're
	weren't
	we've
	what
	whatever
	what'll
	what's
	what've
	when
	whence
	whenever
	where
	whereafter
	whereas
	whereby
	wherein
	where's
	whereupon
	wherever
	whether
	which
	whichever
	while
	whilst
	whither
	who
	who'd
	whoever
	whole
	who'll
	whom
	whomever
	who's
	whose
	why
	will
	willing
	wish
	with
	within
	without
	wonder
	won't
	would
	wouldn't
	yes
	yet
	you
	you'd
	you'll
	your
	you're
	yours
	yourself
	yourselves
	you've
	zero
	a
	how's
	i
	when's
	why's
	b
	c
	d
	e
	f
	g
	h
	j
	l
	m
	n
	o
	p
	q
	r
	s
	t
	u
	uucp
	w
	x
	y
	z
	I
	www
	amoungst
	amount
	bill
	bottom
	call
	computer
	con
	couldnt
	cry
	de
	describe
	detail
	due
	eleven
	empty
	fifteen
	fify
	fill
	find
	fire
	forty
	front
	full
	give
	hasnt
	herse”
	himse”
	interest
	itse”
	mill
	move
	myse”
	part
	put
	show
	side
	sincere
	sixty
	system
	ten
	thick
	thin
	top
	twelve
	twenty
	abst
	accordance
	act
	added
	adopted
	affected
	affecting
	affects
	ah
	announce
	anymore
	apparently
	approximately
	aren
	arent
	arise
	auth
	beginning
	beginnings
	begins
	biol
	briefly
	ca
	date
	ed
	effect
	et-al
	ff
	fix
	gave
	giving
	hed
	heres
	hes
	hid
	home
	id
	im
	immediately
	importance
	important
	index
	information
	invention
	itd
	keys
	kg
	km
	largely
	lets
	line
	'll
	means
	mg
	million
	ml
	mug
	na
	nay
	necessarily
	nos
	noted
	obtain
	obtained
	omitted
	ord
	owing
	page
	pages
	poorly
	possibly
	potentially
	pp
	predominantly
	present
	previously
	primarily
	promptly
	proud
	quickly
	ran
	readily
	ref
	refs
	related
	research
	resulted
	resulting
	results
	run
	sec
	section
	shed
	shes
	showed
	shown
	showns
	shows
	significant
	significantly
	similar
	similarly
	slightly
	somethan
	specifically
	state
	states
	stop
	strongly
	substantially
	successfully
	sufficiently
	suggest
	thered
	thereof
	therere
	thereto
	theyd
	theyre
	thou
	thoughh
	thousand
	throug
	til
	tip
	ts
	ups
	usefully
	usefulness
	've
	vol
	vols
	wed
	whats
	wheres
	whim
	whod
	whos
	widely
	words
	world
	youd
	youre</p>
			<p style="display: none;" id="sw_hebrew">את
	לא
	של
	אני
	על
	זה
	עם
	כל
	הוא
	אם
	או
	גם
	יותר
	יש
	לי
	מה
	אבל
	פורום
	אז
	טוב
	רק
	כי
	שלי
	היה
	בפורום
	אין
	עוד
	היא
	אחד
	ב
	ל
	עד
	לך
	כמו
	להיות
	אתה
	כמה
	אנחנו
	הם
	כבר
	אנשים
	אפשר
	תודה
	שלא
	אותו
	ה
	מאוד
	הרבה
	ולא
	ממש
	לו
	א
	מי
	חיים
	בית
	שאני
	יכול
	שהוא
	כך
	הזה
	איך
	היום
	קצת
	עכשיו
	שם
	בכל
	יהיה
	תמיד
	י
	שלך
	הכי
	ש
	בו
	לעשות
	צריך
	כן
	פעם
	לכם
	ואני
	משהו
	אל
	שלו
	שיש
	ו
	וגם
	אתכם
	אחרי
	בנושא
	כדי
	פשוט
	לפני
	שזה
	אותי
	אנו
	למה
	דבר
	כ
	כאן
	אולי
	טובים
	רוצה
	שנה
	בעלי
	החיים
	למען
	אתם
	מ
	בין
	יום
	זאת
	איזה
	ביותר
	לה
	אחת
	הכל
	הפורומים
	לכל
	אלא
	פה
	יודע
	שלום
	דקות
	לנו
	השנה
	דרך
	אדם
	נראה
	זו
	היחידה
	רוצים
	בכלל
	טובה
	שלנו
	האם
	הייתי
	הלב
	היו
	ח
	שדרות
	בלי
	להם
	שאתה
	אותה
	מקום
	ואתם
	חלק
	בן
	בואו
	אחר
	האחת
	אותך
	כמובן
	בגלל
	באמת
	מישהו
	ילדים
	אותם
	הפורום
	טיפוח
	וזה
	ר
	שהם
	אך
	מזמין
	ישראל
	כוס
	זמן
	ועוד
	הילדים
	עדיין
	כזה
	עושה
	שום
	לקחת
	העולם
	תפוז
	לראות
	לפורום
	וכל
	לקבל
	נכון
	יוצא
	לעולם
	גדול
	אפילו
	ניתן
	שני
	אוכל
	קשה
	משחק
	ביום
	ככה
	אמא
	בת
	השבוע
	נוספים
	לגבי
	בבית
	אחרת
	לפי
	ללא
	שנים
	הזמן
	שמן
	מעט
	לפחות
	אף
	שוב
	שלהם
	במקום
	כולם
	נועית
	הבא
	מעל
	לב
	המון
	לדבר
	ע
	אוהב
	מוסיפים
	חצי
	בעיקר
	כפות
	לפעמים
	שהיא
	הנהלת
	ועל
	ק
	אוהבים
	ת
	יודעת
	ד
	גרוע
	שאנחנו
	מים
	לילדים
	בארץ
	מודיע
	אשמח
	שלכם
	פחות
	לכולם
	די
	אהבה
	יכולה
	דברים
	הקהילה
	לעזור
	פרטים
	בדיוק
	מלח
	קל
	הראשי
	שלה
	להוסיף
	השני
	לדעתי
	בר
	למרות
	שגם
	מוזמנים
	לאחר
	במה
	חושב
	מאד
	יפה
	להגשים
	חדש
	קטן
	מחפשים
	שמח
	מדברים
	ואם
	במיוחד
	עבודה
	מדי
	ואז
	חשוב
	שאם
	אוהבת
	פעמים
	מנהלת
	אומר
	מול
	קשר
	מנהל
	שיהיה
	שאין
	שאנו
	האהבה
	ס
	הצטרפו
	כפית
	בשביל
	החגים
	אופן
	לתת
	כף
	בתוך
	סוכר
	גיל
	בהצלחה
	והוא
	מקווה
	סתם
	ויש
	נגד
	כמעט
	שאת
	עולה
	אי
	מספר
	ראשון
	לדרך
	נהיה
	לעצב
	עושים
	ולנהל
	היתה
	עליו
	מזה
	הייתה
	בא
	בפרס
	חלות
	ראש
	מזמינים
	טיפים
	מכבי
	רבה
	הורים
	‡
	מקרה
	קרן
	המוצלח
	להגיע
	גדולה
	כנראה
	החמשיר
	הראשון
	פלפל
	המשחק
	וכאן
	לדעת
	ואת
	גרועים
	ספר
	אגב
	אחרים
	להגיד
	בתפוז
	והעולם
	אופנה
	דווקא
	מספיק
	שעות
	תמונות
	כשאנחנו
	שוקולד
	ולכן
	ג
	לקרוא
	לניהול
	שבוע
	ויופי
	חלום
	בה
	שהיה
	שאלה
	מקומה
	הזו
	בפורומים
	החדש
	מתאמצים
	שחקן
	שמזינים
	נשמת
	בערך
	מכל
	ומה
	רגל
	כסף
	רואה
	קטנה
	בצל
	בעולם
	אינטרנט
	חוץ
	ברור
	הולך
	חושבת
	לזה
	כלום
	הן
	כאלה
	בטוח
	הדבר
	תהיה
	מגיע
	סוף
	האמת
	ממנו
	מיכל
	החדשה
	לתרום
	האנשים
	ועד
	בדרך
	אצלי
	ההורים
	בני
	מתוך
	כאשר
	לבד
	ראיתי
	מצב
	מלא
	לבחור
	נשמח
	החג
	רע
	עוף
	מן
	להביא
	מצאתי
	כתובות
	מעניין
	צריכה
	להכנס
	לחלוטין
	שעה
	מתכון
	קודם
	תשובות
	מדובר
	ניהול
	מזל
	כדאי
	יהיו
	ההודעות
	בוקר
	נילוות
	איפה
	בעיה
	קמח
	ללכת
	פורומים
	אמר
	נושא
	ההכנה
	בבקשה
	שכל
	הזאת
	למשחק
	פנינה
	תחרות
	חבר
	לקנות
	מהם
	רגע
	גרם
	אלו
	עצמו
	מראש
	הכלב
	כולנו
	עדיף
	איתו
	למשל
	לבשל
	למי
	רעיונות
	הבלוג
	רוב
	אביב
	כרגע
	בסוף
	אלה
	לחג
	ערוץ
	שווה
	באופן
	מאמין
	לבן
	בזה
	הכבוד
	לראש
	ם
	ימי
	שחור
	בצורה
	בעמוד
	ועם
	וחצי
	האלה
	תמונה
	בשלב
	משחקים
	נו</p>
			<p style="display: none;" id="sw_russian">c
	а
	алло
	без
	белый
	близко
	более
	больше
	большой
	будем
	будет
	будете
	будешь
	будто
	буду
	будут
	будь
	бы
	бывает
	бывь
	был
	была
	были
	было
	быть
	в
	важная
	важное
	важные
	важный
	вам
	вами
	вас
	ваш
	ваша
	ваше
	ваши
	вверх
	вдали
	вдруг
	ведь
	везде
	вернуться
	весь
	вечер
	взгляд
	взять
	вид
	видел
	видеть
	вместе
	вне
	вниз
	внизу
	во
	вода
	война
	вокруг
	вон
	вообще
	вопрос
	восемнадцатый
	восемнадцать
	восемь
	восьмой
	вот
	впрочем
	времени
	время
	все
	все еще
	всегда
	всего
	всем
	всеми
	всему
	всех
	всею
	всю
	всюду
	вся
	всё
	второй
	вы
	выйти
	г
	где
	главный
	глаз
	говорил
	говорит
	говорить
	год
	года
	году
	голова
	голос
	город
	да
	давать
	давно
	даже
	далекий
	далеко
	дальше
	даром
	дать
	два
	двадцатый
	двадцать
	две
	двенадцатый
	двенадцать
	дверь
	двух
	девятнадцатый
	девятнадцать
	девятый
	девять
	действительно
	дел
	делал
	делать
	делаю
	дело
	день
	деньги
	десятый
	десять
	для
	до
	довольно
	долго
	должен
	должно
	должный
	дом
	дорога
	друг
	другая
	другие
	других
	друго
	другое
	другой
	думать
	душа
	е
	его
	ее
	ей
	ему
	если
	есть
	еще
	ещё
	ею
	её
	ж
	ждать
	же
	жена
	женщина
	жизнь
	жить
	за
	занят
	занята
	занято
	заняты
	затем
	зато
	зачем
	здесь
	земля
	знать
	значит
	значить
	и
	иди
	идти
	из
	или
	им
	имеет
	имел
	именно
	иметь
	ими
	имя
	иногда
	их
	к
	каждая
	каждое
	каждые
	каждый
	кажется
	казаться
	как
	какая
	какой
	кем
	книга
	когда
	кого
	ком
	комната
	кому
	конец
	конечно
	которая
	которого
	которой
	которые
	который
	которых
	кроме
	кругом
	кто
	куда
	лежать
	лет
	ли
	лицо
	лишь
	лучше
	любить
	люди
	м
	маленький
	мало
	мать
	машина
	между
	меля
	менее
	меньше
	меня
	место
	миллионов
	мимо
	минута
	мир
	мира
	мне
	много
	многочисленная
	многочисленное
	многочисленные
	многочисленный
	мной
	мною
	мог
	могу
	могут
	мож
	может
	может быть
	можно
	можхо
	мои
	мой
	мор
	москва
	мочь
	моя
	моё
	мы
	на
	наверху
	над
	надо
	назад
	наиболее
	найти
	наконец
	нам
	нами
	народ
	нас
	начала
	начать
	наш
	наша
	наше
	наши
	не
	него
	недавно
	недалеко
	нее
	ней
	некоторый
	нельзя
	нем
	немного
	нему
	непрерывно
	нередко
	несколько
	нет
	нею
	неё
	ни
	нибудь
	ниже
	низко
	никакой
	никогда
	никто
	никуда
	ним
	ними
	них
	ничего
	ничто
	но
	новый
	нога
	ночь
	ну
	нужно
	нужный
	нх
	о
	об
	оба
	обычно
	один
	одиннадцатый
	одиннадцать
	однажды
	однако
	одного
	одной
	оказаться
	окно
	около
	он
	она
	они
	оно
	опять
	особенно
	остаться
	от
	ответить
	отец
	откуда
	отовсюду
	отсюда
	очень
	первый
	перед
	писать
	плечо
	по
	под
	подойди
	подумать
	пожалуйста
	позже
	пойти
	пока
	пол
	получить
	помнить
	понимать
	понять
	пор
	пора
	после
	последний
	посмотреть
	посреди
	потом
	потому
	почему
	почти
	правда
	прекрасно
	при
	про
	просто
	против
	процентов
	путь
	пятнадцатый
	пятнадцать
	пятый
	пять
	работа
	работать
	раз
	разве
	рано
	раньше
	ребенок
	решить
	россия
	рука
	русский
	ряд
	рядом
	с
	с кем
	сам
	сама
	сами
	самим
	самими
	самих
	само
	самого
	самой
	самом
	самому
	саму
	самый
	свет
	свое
	своего
	своей
	свои
	своих
	свой
	свою
	сделать
	сеаой
	себе
	себя
	сегодня
	седьмой
	сейчас
	семнадцатый
	семнадцать
	семь
	сидеть
	сила
	сих
	сказал
	сказала
	сказать
	сколько
	слишком
	слово
	случай
	смотреть
	сначала
	снова
	со
	собой
	собою
	советский
	совсем
	спасибо
	спросить
	сразу
	стал
	старый
	стать
	стол
	сторона
	стоять
	страна
	суть
	считать
	т
	та
	так
	такая
	также
	таки
	такие
	такое
	такой
	там
	твои
	твой
	твоя
	твоё
	те
	тебе
	тебя
	тем
	теми
	теперь
	тех
	то
	тобой
	тобою
	товарищ
	тогда
	того
	тоже
	только
	том
	тому
	тот
	тою
	третий
	три
	тринадцатый
	тринадцать
	ту
	туда
	тут
	ты
	тысяч
	у
	увидеть
	уж
	уже
	улица
	уметь
	утро
	хороший
	хорошо
	хотел бы
	хотеть
	хоть
	хотя
	хочешь
	час
	часто
	часть
	чаще
	чего
	человек
	чем
	чему
	через
	четвертый
	четыре
	четырнадцатый
	четырнадцать
	что
	чтоб
	чтобы
	чуть
	шестнадцатый
	шестнадцать
	шестой
	шесть
	эта
	эти
	этим
	этими
	этих
	это
	этого
	этой
	этом
	этому
	этот
	эту
	я
	являюсь</p>
		</div>
		
	</div>
	<!-- Random image generator -->
	<script>
	google.charts.load('current', {packages: ['corechart', 'bar']});
	
	let data = null;
	let tags = null;
	let stopWords = null;
	let stopWordsListLower = null;
	let model = null;
	
	let russianStemmer = new RussianStemmer();
	
	/*
	$(document).ready(function()
	{
		$("#sw_english").load("../data/sw_english.txt");
		$("#sw_hebrew").load("../data/sw_hebrew.txt");
		$("#sw_russian").load("../data/sw_russian.txt");
	});
	*/
	
	document.getElementById("trainBtn").disabled = true;
	
	function init()
	{
	  document.getElementById('Sentences').addEventListener('change', DataFile, false);
	  document.getElementById('Tags').addEventListener('change', TagFile, false);
	  document.getElementById('StopWords').addEventListener('change', StopWordsFile, false);
	  document.getElementById('ModelFile').addEventListener('change', ModelFileLoader, false);
	  document.getElementById('WhatsAppFile').addEventListener('change', WhatsAppFileLoader, false);
	}

	function DataFile(event)
	{
	  const reader = new FileReader();
	  reader.onload = DataFileLoad;
	  reader.readAsText(event.target.files[0]);
	  console.log("Data file loaded");
	}

	function DataFileLoad(event)
	{
	  data = event.target.result;
	  openTrain();
	}

	function TagFile(event)
	{
	  const reader = new FileReader();
	  reader.onload = TagFileLoad;
	  reader.readAsText(event.target.files[0]);
	  console.log("Tags file loaded");
	}

	function TagFileLoad(event)
	{
	  tags = event.target.result;
	  openTrain();
	}

	function StopWordsFile(event)
	{
	  const reader = new FileReader();
	  reader.onload = StopWordsFileLoad;
	  reader.readAsText(event.target.files[0]);
	  console.log("StopWords file loaded");
	}

	function StopWordsFileLoad(event)
	{
	  stopWords = event.target.result;
	  openTrain();
	}

	function ModelFileLoader(event)
	{
	  const reader = new FileReader();
	  reader.onload = ModelFileLoaderLoad;
	  reader.readAsText(event.target.files[0]);
	  console.log("Model file loaded");
	}

	function ModelFileLoaderLoad(event)
	{
		stopWordsListLower = [];
		model = JSON.parse(event.target.result);
		document.getElementById("inferance_panel").style.display = "";
		document.getElementById("train_panel").style.display = "none";
	}

	function WhatsAppFileLoader(event)
	{
	  const reader = new FileReader();
	  reader.onload = WhatsAppFileLoaderLoad;
	  reader.readAsText(event.target.files[0]);
	  console.log("WhatsApp file loaded");
	}

	function WhatsAppFileLoaderLoad(event)
	{
		processWhatsAppChat(event.target.result);
		console.log("WhatsApp file processed");
		train();
		document.getElementById("inferance_panel").style.display = "";
		document.getElementById("train_panel").style.display = "none";
	}
	
	function openTrain()
	{
		if (data != null && tags != null & stopWords != null)
		{
			document.getElementById("trainBtn").disabled = false;
		}
		else
		{
			document.getElementById("trainBtn").disabled = true;
		}
	}
	
	function runWord()
	{
		// get input 
		var input = document.getElementById("CheckWord").value.trim().toLowerCase();
		
		tagsFinalCount = new Object();
		if (input in model)
		{
			var tagsCounts = model[input];
			for (var tag in tagsCounts)
			{
				tagsFinalCount[tag] = tagsCounts[tag];
			}
		}
		else
		{
			alert("Word '" + input + "' is not in the model");
			return false;
		}
		// normalize ansewr again
		var tagsDist = NormalizeCountSpace(tagsFinalCount);
		// pick the bigget one and show on screen
		var maxTag = null;
		var maxScore = 0;
		var graphData = [];
		for (var tag in tagsDist)
		{
			if (tagsDist[tag] >= maxScore)
			{
				maxScore = tagsDist[tag];
				maxTag = tag;
			}
			graphData.push([tag, 100 * tagsDist[tag]]);
		}
		document.getElementById("BestTagWord").value = "Tag: " + maxTag + ", confidance: " + (Math.floor((10000 * maxScore))/100) + "%";
		// plot the distrebution as graph
		  var data = new google.visualization.DataTable();
		  data.addColumn('string', 'Tag');
		  data.addColumn('number', 'Confidance');

		  data.addRows(graphData);

		  var options = {
			title: 'Tags Distrebution',
			legend: 'none',
			hAxis: {
			  title: 'Tag'
			},
			vAxis: {
			  title: 'Confidance (%)',
			  ticks: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]
			}
		  };

		  var chart = new google.visualization.ColumnChart(document.getElementById('plot_container_word'));
		  chart.draw(data, options);
	}
	
	function run()
	{
		// get input 
		var input = document.getElementById("Sentence").value;
		// convert to the same standard
		var inputWords = FixSentence(input);
		
		// sum the values for each one
		var tagsFinalCount = [];
		var isFirstTime = true;
		for (var i = 0; i < inputWords.length; i++)
		{
			if (inputWords[i] in model)
			{
				// get all the possible tags 
				if (isFirstTime)
				{
					for (var tag in model[inputWords[i]])
					{
						tagsFinalCount[tag] = 0;
					}
					isFirstTime = false;
				}
				var tagsCounts = model[inputWords[i]];
				for (var tag in tagsCounts)
				{
					tagsFinalCount[tag] += tagsCounts[tag];
				}
			}
		}
		// normalize ansewr again
		var tagsDist = NormalizeCountSpace(tagsFinalCount);
		// pick the bigget one and show on screen
		var maxTag = null;
		var maxScore = 0;
		var graphData = [];
		for (var tag in tagsDist)
		{
			if (tagsDist[tag] >= maxScore)
			{
				maxScore = tagsDist[tag];
				maxTag = tag;
			}
			graphData.push([tag, 100 * tagsDist[tag]]);
		}
		document.getElementById("BestTag").value = "Tag: " + maxTag + ", confidance: " + (Math.floor((10000 * maxScore))/100) + "%";
		// plot the distrebution as graph
		  var data = new google.visualization.DataTable();
		  data.addColumn('string', 'Tag');
		  data.addColumn('number', 'Confidance');

		  data.addRows(graphData);

		  var options = {
			title: 'Tags Distrebution',
			legend: 'none',
			hAxis: {
			  title: 'Tag'
			},
			vAxis: {
			  title: 'Confidance (%)',
			  ticks: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]
			}
		  };

		  var chart = new google.visualization.ColumnChart(document.getElementById('plot_container'));
		  chart.draw(data, options);
	}
	
	function train()
	{
		// prepare data objects
		try
		{
			var dataSentences = data.split("\n");
			var tagsList = tags.split("\n");
			var stopWordsList = stopWords.split("\n");
		
			// make sure the stop words in the same format as the data we compare to
			stopWordsListLower = [];
			for (var i = 0; i < stopWordsList.length; i++)
			{
				stopWordsListLower.push(stopWordsList[i].trim().toLowerCase());
			}
			console.log("Stop Words Ready");
		}
		catch (error)
		{
			console.log("trying to check global data as lists and not strings");			
			var dataSentences = data;
			var tagsList = tags;
			loadDefaultStopWords();
		}
		
		// check valid sizes
		if (dataSentences.length != tagsList.length)
		{
			alert("The number of samples and tags are not the same - abording train");
			return false;
		}
		
		var fixedData = FixData(dataSentences);
		
		console.log("Data is in right format");
		
		// build the space of each tag words
		var tagsSapces = new Object();
		// first, empty list to each tag
		for (var i = 0; i < tagsList.length; i++)
		{
			tagsSapces[tagsList[i].trim().toLowerCase()] = [];
		}
		// add words to each data to this tags spaces
		for (var tagIndex = 0; tagIndex < tagsList.length; tagIndex++)
		{
			for (var wordIndex = 0; wordIndex < fixedData[tagIndex].length; wordIndex++)
			{
				tagsSapces[tagsList[tagIndex].trim().toLowerCase()].push(fixedData[tagIndex][wordIndex]);
			}
		}
		console.log("Ready Tag list");
		// make each space a count space
		for (var tagItem in tagsSapces)
		{
			tagsSapces[tagItem] = CountSpace(tagsSapces[tagItem]);
		}
		console.log("Data as count space");
		
		// set the model
		model = reverseKeyValue(tagsSapces);
		console.log("Model is ready");
		// download it
		// TODO: return it later
		//downloadasTextFile("model_" + Object.keys(tagsSapces).length + "_tags.txt", JSON.stringify(model));
		
		// update the GUI
		document.getElementById("inferance_panel").style.display = "";
		document.getElementById("train_panel").style.display = "none";
		console.log("Trian finished");
	}
	
	function reverseKeyValue(tagToWords)
	{
		// find all uniqe words and tags
		var allWords = [];
		var allTags = [];
		for(var tag in tagToWords) 
		{
			allTags.push(tag);
			for(var word in tagToWords[tag])			
			{
				if (!(word in allWords))
				{
					allWords.push(word);
				}
			}
		}
		
		// init answer but without weights 
		var answer = new Object();
		for (var wordIndex = 0; wordIndex < allWords.length; wordIndex++)
		{
			answer[allWords[wordIndex]] = new Object();
			for (var tagIndex = 0; tagIndex < allTags.length; tagIndex++)
			{
				answer[allWords[wordIndex]][allTags[tagIndex]] = 0;
			}
		}
		
		var countError = 0;
		
		// for each word, we wish to get the count for each tag
		for(var tag in tagToWords) 
		{
			allTags.push(tag);
			for(var word in tagToWords[tag])			
			{
				try
				{
					answer[word][tag] = tagToWords[tag][word];
				}
				catch (error)
				{
					countError += 1;
					console.log("Error #" + countError + " saying: " + error + ", at tag = " + tag + " & word = " + word);
				}
			}
		}
		
		return answer;
	}
	
	function CountSpace(repeatWords)
	{
		var counts = new Object();
		for (var i = 0; i < repeatWords.length; i++)
		{
			if (repeatWords[i] in counts)
			{
				counts[repeatWords[i]] += 1;
			}
			else
			{
				counts[repeatWords[i]] = 1;
			}
		}
		return counts;
	}
	
	function NormalizeCountSpace(countSpace)
	{
		// use L1 normalization
		var sum = 0;
		for(var key in countSpace) 
		{
			sum += countSpace[key];
		}
		
		var normalizedCounts = new Object();
		for(var key in countSpace) 
		{
			normalizedCounts[key] = countSpace[key] / sum;
		}
		return normalizedCounts;
	}
	
	function FixData(dataSentences)
	{
		// fix text //
		// remove double spaces, non letters 
		var fixedSentences = [];
		var errorCount = 0;
		for (var i = 0; i < dataSentences.length; i++)
		{
			try
			{
				fixedSentences.push(FixSentence(dataSentences[i]));
			}
			catch (error)
			{
				errorCount += 1;
				console.log("Error #" + errorCount + ", saying: " + error);
				fixedSentences.push([]);
			}
		}
		return fixedSentences;
	}
	
	function FixSentence(sent)
	{
		// remove non-alphanumeric chars and keep spaces
		var answer = sent.trim().toLowerCase().replace(/[^a-zа-яא-ת ]/gi, ''); 
		// remove double spaces
		while (answer.includes("  "))
		{
			answer = answer.replace("  ", " ");
		}
		// get tokens 
		var answerWords = answer.split(" ");
		// remove stop words
		var answerFinalWords = [];
		for (var i = 0; i < answerWords.length; i++)
		{
			var isStopWord = false;
			for (var j = 0; j < stopWordsListLower.length; j++)
			{
				if (answerWords[i] == stopWordsListLower[j])
				{
					isStopWord = true;
					break;
				}
			}
			if (!isStopWord)
			{
				var stemWord = StemWord(answerWords[i]);
				answerFinalWords.push(answerWords[i]);
			}
		}
		return answerFinalWords;
	}
	
	function StemWord(word)
	{
		var answer = stemmer(word);
		answer = russianStemmer.stemWord(answer);
		while (answer.startsWith("ב") || answer.startsWith("ה") || answer.startsWith("ו"))
		{
			answer = answer.substring(1);
		}
		if (answer.startsWith("כש"))
		{
			answer = answer.substring(2);
		}
		if (answer.startsWith("ל"))
		{
			answer = answer.substring(1);
		}
		if (answer.endsWith("ות"))
		{
			answer = answer.substring(0, answer.length - 2) + "ה";
		}
		if (answer.endsWith("ים"))
		{
			answer = answer.substring(0, answer.length - 2);
		}
		if (answer.endsWith("ה"))
		{
			answer = answer.substring(0, answer.length - 1);
		}
		return answer;
	}
	
	function processWhatsAppChat(chatData)
	{
		// first, run one each line
		var lines = chatData.split("\n");
		tags = [];
		data = [];
		for (var i = 0; i < lines.length; i++)
		{
			var initDate = lines[i].substring(0,15);
			if (initDate.includes("/") && initDate.includes(":") && initDate.includes(",") && !lines[i].includes("<Media omitted>") && !lines[i].includes("end-to-end encryption"))
			{
				var items = lines[i].substring(15).split(":");
				var newTag = items[0].replace("-", "").trim();
				if (items.length == 2 && !newTag.includes("added") && !newTag.includes("removed") && !newTag.includes("changed to"))
				{
					tags.push(newTag);
					data.push(items[1]);
				}
			}
		}
	}
	
	function loadDefaultStopWords()
	{
		var englishSW = $('#sw_english').text();
		var hebrewSW = $('#sw_hebrew').text();
		var russianSW = $('#sw_russian').text();
		var swListEng = englishSW.split("\n");
		var swListHeb = hebrewSW.split("\n");
		var swListRus = russianSW.split("\n");
		stopWordsListLower = [];
		stopWordsListLower = stopWordsListLower.concat(swListEng);
		stopWordsListLower = stopWordsListLower.concat(swListHeb);
		stopWordsListLower = stopWordsListLower.concat(swListRus);
	}
	
	function downloadasTextFile(filename, text) {
		var element = document.createElement('a');
		element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
		element.setAttribute('download', filename);

		element.style.display = 'none';
		document.body.appendChild(element);

		element.click();

		document.body.removeChild(element);
	}
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="js/main.js"></script> 
	<script src="js/search.js"></script> 
</body>
</html>