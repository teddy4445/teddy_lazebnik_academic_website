<html>
    <head>
        <title>
            In Door SEIIRD P-system Simulator
        </title>

        <script language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/p5.js" type="text/javascript"></script>
        <script language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/addons/p5.dom.js"></script>
        <script src="https://www.gstatic.com/charts/loader.js" type="text/javascript"></script>
        <link crossorigin="anonymous" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" rel="stylesheet" />

        <script language="javascript" src="sketch.js" type="text/javascript"></script>
        <script language="javascript" src="population.js" type="text/javascript"></script>
        <script language="javascript" src="member.js" type="text/javascript"></script>
        <script language="javascript" src="chart.js" type="text/javascript"></script>
        <script language="javascript" src="simulator.js" type="text/javascript"></script>
        <script language="javascript" src="graph.js" type="text/javascript"></script>

        <link href="style.css" rel="stylesheet" type="text/css" />
        <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" rel="stylesheet" />
    </head>
    <body>
        <div class="container">
            <div class="row center spacer">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <h1 class="center head">
                        In Door SEIIRD P-System Based Simulator
                    </h1>
                </div>
            </div>
            <div class="row spacer" id="init_form">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <form action="return false;" method="get">
                        <div class="row"></div>

                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <h3>Infection rates</h3>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="a_a_t_c" title="Adult to Adult Transform Chance">
                                        Adult to Adult Transform Chance
                                    </label>
                                    <input class="form-control" id="a_a_t_c" placeholder="Adult to Adult Transform Chance" required="" type="text" value="0.3" />
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="a_c_t_c">
                                        Adult to Children Transform Chance
                                    </label>
                                    <input class="form-control" id="a_c_t_c" placeholder="Adult to Children Transform Chance" required="" type="text" value="0.2" />
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="c_c_t_c" title=" Children to Children Transform Chance">
                                        Children to Children Transform Chance
                                    </label>
                                    <input class="form-control" id="c_c_t_c" placeholder="Children to Children Transform Chance" required="" type="text" value="0.3" />
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="children_adult_infection_chance">
                                        Children to Adult Transform Chance
                                    </label>
                                    <input class="form-control" id="c_a_t_c" placeholder="Children to Adult Transform Chance" required="" type="text" value="0.2" />
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <h3>Symptomatic Dyanmics</h3>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="adult_asymptomatic" title="adult_asymptomatic">
                                        Rate of adults that become asymptomatic
                                    </label>
                                    <input class="form-control" id="adult_asymptomatic" placeholder="Rate of adults that become asymptomatic" required="" type="text" value="0.08" />
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="children_asymptomatic">
                                        Rate of children that become asymptomatic
                                    </label>
                                    <input class="form-control" id="children_asymptomatic" placeholder="Rate of children that become asymptomatic" required="" type="text" value="0.99" />
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <h3>Recover and infection durations and rates</h3>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="infected_to_recover_time" title="Adult Infected To Recovered">
                                        Adult Infected To Recovered Duration (hours)
                                    </label>
                                    <input class="form-control" id="infected_to_recover_time_adult" max="999" min="0" placeholder="Adult Infected To Recovered in hours" required="" type="number" value="336" />
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="infected_to_recover_time" title="Children Infected To Recovered">
                                        Children Infected To Recovered Duration (hours)
                                    </label>
                                    <input class="form-control" id="infected_to_recover_time_children" max="999" min="0" placeholder="Children Infected To Recovered in hours" required="" type="number" value="48" />
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="pra" title="Adult Infected To Recovered Chance">
                                        Adult Infected To Recovered Chance
                                    </label>
                                    <input class="form-control" id="infected_to_recover_chance_adult" placeholder="Adult Infected To Recovered Cance (in percent)" required="" type="text" value="0.98" />
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="prc" title="Children Infected To Recovered Chance">
                                        Children Infected To Recovered chance
                                    </label>
                                    <input class="form-control" id="infected_to_recover_chance_children" placeholder="Children Infected To Cance (in percent)" required="" type="text" value="1" />
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="infected_to_recover_time" title="Adult Infected To Recovered">
                                        Exposed to infected time adults (hours)
                                    </label>
                                    <input class="form-control" id="exposed_to_infected_time_adult" max="999" min="0" placeholder="Adult Infected To Recovered in hours" required="" type="number" value="48" />
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="infected_to_recover_time" title="Children Infected To Recovered">
                                        Exposed to infected time children (hours)
                                    </label>
                                    <input class="form-control" id="exposed_to_infected_time_children" max="999" min="0" placeholder="Children Infected To Recovered in hours" required="" type="number" value="24" />
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <h3>Location and Population Description File</h3>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="fps" title="Simulation Data File">
                                        <b>Simulation Data File</b>
                                    </label>
                                    <input class="form-control" type="file" id="data_json_file_input" required=""/>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <a class="btn btn-info btn demo-link" href="/indoor-sir-simulation/school.json" target="_blank"> check out <b>school</b> demo data file </a>
								<a class="btn btn-info btn demo-link" href="/indoor-sir-simulation/office.json" target="_blank"> check out <b>office</b> demo data file </a>
								<a class="btn btn-info btn demo-link" href="/indoor-sir-simulation/home.json" target="_blank"> check out <b>home</b> demo data file </a>
								<a class="btn btn-info btn demo-link" href="/indoor-sir-simulation/combined.json" target="_blank"> check out <b>combined</b> demo data file </a>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <h3>Simulation Parameters</h3>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="fps" title="Frames Per Second">
                                        <b>Frames Per Second (FPS)</b>
                                    </label>
                                    <input class="form-control" id="fps" max="48" min="0" placeholder="Frames Per Second" required="" type="number" value="12" />
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="graph_samples">
                                        <b>Once in how many algorithmic steps, the graph should be updated?</b>
                                    </label>
                                    <input class="form-control" id="graph_samples" max="96" min="1" placeholder="Once in how many algorithmic  steps, the graph should be updated?" required="" type="number" value="24" />
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="fps" title="Frames Per Second">
                                        <b>Show Heat Map? (1-yes, 0-no)</b>
                                    </label>
                                    <input class="form-control" id="graph_show_heatmap" max="1" min="0" placeholder="Show Heat Map? (1-yes, 0-no)" required="" type="number" value="1" />
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label for="graph_samples">
                                        <b>In map population's states breakdown? (1-yes, 0-no)</b>
                                    </label>
                                    <input class="form-control" id="graph_show_breakdown" max="1" min="0" placeholder="In map population's states breakdown? (1-yes, 0-no)?" required="" type="number" value="1" />
                                </div>
                            </div>
                        </div>
						
						<!--
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="form-check">
                                    <label for="fps" title="Frames Per Second">
                                        <b>Show distribution style</b>
                                    </label>
									<select class="form-select" aria-label="Default select example">
									  <option value="graph" selected>Graph</option>
									  <option value="heat_map">Heat Map</option>
									</select>
                                </div>
                            </div>
                        </div>
						-->

                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <button class="btn btn-primary btn-lg" onclick="return startSimulation()" style="width: 100%; margin-top: 10px;">
                                    Run Simulation
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
			
			<!-- the place where analysis of the performace is shown -->
            <div id="main" style="display: none;">
                <div class="row spacer">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 spacer-1" id="clock-holder" style="text-align: center";>
							<!-- simulation view -->
							<div>
								<h3 id="clock"></h3>
							</div>
					</div>
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 spacer-1" id="game-holder" style="text-align: center";>
							<!-- simulation view -->
							<div id="simCanvas">
							</div>
					</div>
                </div>
                <div class="row spacer">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 spacer-1" id="stat-table-holder">
						<!-- table with the values getten from the user -->
						<h4>Current State's distribution (Global)</h4>
						<div class="table-responsive">
						  <table class="table table-hover">
							  <thead>
								<tr>
								  <th scope="col">X</th>
								  <th scope="col">Susceptible</th>
								  <th scope="col">Exposed</th>
								  <th scope="col">Infected asymptomatic</th>
								  <th scope="col">Infected symptomatic</th>
								  <th scope="col">Recovered</th>
								  <th scope="col">Dead</th>
								</tr>
							  </thead>
							  <tbody>
								<tr>
								  <th scope="row">Children</th>
								  <td id="now_c_s">0</td>
								  <td id="now_c_e">0</td>
								  <td id="now_c_is">0</td>
								  <td id="now_c_ia">0</td>
								  <td id="now_c_r">0</td>
								  <td id="now_c_d">0</td>
								</tr>
								<tr>
								  <th scope="row">Adult</th>
								  <td id="now_a_s">0</td>
								  <td id="now_a_e">0</td>
								  <td id="now_a_is">0</td>
								  <td id="now_a_ia">0</td>
								  <td id="now_a_r">0</td>
								  <td id="now_a_d">0</td>
								</tr>
							  </tbody>
							</table>
						</div>
					</div>
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 spacer-1" id="graphs-holder">
						<!-- analysis and graphs view  -->
								
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<h4>Population distribution in the location</h4>
							<div id="distrebutionPerLocationGraph">
							</div>
						</div>
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<h4>Normalized state's distribution</h4>
							<div id="locationStateBarGraph">
							  
							</div>
						</div>
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<h4>State's distribution over time</h4>
							<div id="stateGraph">
							  
							</div>
						</div>
					</div>
                </div>
                <div class="row spacer">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 spacer-1" id="clock-holder">
						<div>
							<!-- table with the values getten from the user -->
							<h4>Parameter's Table for this simulation</h4>
							<div class="table-responsive">
							  <table class="table table-hover">
								  <thead>
									<tr>
									  <th scope="col">Parameter</th>
									  <th scope="col">Value</th>
									</tr>
								  </thead>
								  <tbody>
									<tr>
									  <th scope="row">Initial susceptible adults</th>
									  <td id="param_s_a">0</td>
									</tr>
									<tr>
									  <th scope="row">Initial exposed adults</th>
									  <td id="param_e_a">0</td>
									</tr>
									<tr>
									  <th scope="row">Initial infected symptomatic adults</th>
									  <td id="param_is_a">0</td>
									</tr>
									<tr>
									  <th scope="row">Initial infected asymptomatic adults</th>
									  <td id="param_ia_a">0</td>
									</tr>
									<tr>
									  <th scope="row">Initial recovered adults</th>
									  <td id="param_r_a">0</td>
									</tr>
									<tr>
									  <th scope="row">Initial susceptible children</th>
									  <td id="param_s_c">0</td>
									</tr>
									<tr>
									  <th scope="row">Initial exposed children</th>
									  <td id="param_e_c">0</td>
									</tr>
									<tr>
									  <th scope="row">Initial infected symptomatic children</th>
									  <td id="param_is_c">0</td>
									</tr>
									<tr>
									  <th scope="row">Initial infected asymptomatic children</th>
									  <td id="param_ia_c">0</td>
									</tr>
									<tr>
									  <th scope="row">Initial recovered children</th>
									  <td id="param_r_c">0</td>
									</tr>
									<tr>
									  <th scope="row">Adult to adult transform chance</th>
									  <td id="param_a_a_t_c">0</td>
									</tr>
									<tr>
									  <th scope="row">Adult to children transform chance</th>
									  <td id="param_a_c_t_c">0</td>
									</tr>
									<tr>
									  <th scope="row">Children to Adult transform chance</th>
									  <td id="param_c_a_t_c">0</td>
									</tr>
									<tr>
									  <th scope="row">Children to children transform chance</th>
									  <td id="param_c_c_t_c">0</td>
									</tr>
									<tr>
									  <th scope="row">Rate of adults that become asymptomatic</th>
									  <td id="param_a_asyptomatic_rate">0</td>
									</tr>
									<tr>
									  <th scope="row">Rate of children that become asymptomatic</th>
									  <td id="param_c_asyptomatic_rate">0</td>
									</tr>
									<tr>
									  <th scope="row">Adults recovery duration (minutes)</th>
									  <td id="param_recovery_duration_a">0</td>
									</tr>
									<tr>
									  <th scope="row">Adults recovery chance (percent)</th>
									  <td id="param_recovery_chance_a">0</td>
									</tr>
									<tr>
									  <th scope="row">Children recovery duration (minutes)</th>
									  <td id="param_recovery_duration_c">0</td>
									</tr>
									<tr>
									  <th scope="row">Children recovery chance (percent)</th>
									  <td id="param_recovery_chance_c">0</td>
									</tr>
									<tr>
									  <th scope="row">Exposed to infected adult (minutes)</th>
									  <td id="param_exposed_to_infected_time_adult">0</td>
									</tr>
									<tr>
									  <th scope="row">Exposed to infected adult (minutes)</th>
									  <td id="param_exposed_to_infected_time_children">0</td>
									</tr>
								  </tbody>
								</table>
							</div>
							<!-- current clock time from the beginning of the simulation -->
						</div>
					</div>
                </div>
            </div>
        </div>
    </body>
</html>
